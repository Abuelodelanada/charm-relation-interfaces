{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://canonical.github.io/charm-relation-interfaces/cos_agent/schemas/provider.json",
    "type": "object",
    "title": "`cos_agent` provider root schema",
    "description": "The `cos_agent` root schema comprises the entire provider databag for this interface.",
    "default": {},
    "examples": [
        {
        "application-data": {
            "config": {
                "metrics": {
                    "alert_rules": {
                        "groups": [
                            {
                            "name": "test_58b48ff0_zookeeper_cos_23790144_zinc",
                            "rules": [
                                {
                                "alert": "ZincTargetMissing",
                                "annotations": {
                                    "description": "A Prometheus target has disappeared. An exporter might be crashed.\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}",
                                    "summary": "Prometheus target missing (instance {{ $labels.instance}})"
                                },
                                "expr": "up{juju_application=\"zinc2\"} == 0",
                                "for": "0m",
                                "labels": {
                                    "app_group": "cloud",
                                    "juju_application": "zookeeper",
                                    "juju_charm": "zookeeper",
                                    "juju_model": "test",
                                    "juju_model_uuid": "58b48ff0-608b-435f-83b9-ea643e0b98db",
                                    "severity": "critical"
                                }
                            }
                            ],
                        },
                        ],
                    }
                },
                "logs": {
                    "alert_rules": {}
                },
                "dashboards": {
                    "dashboards": [
                        "/Td6WFoAAATm1rRGAgAhARYAAAB0L+Wj6hvVPXVdA…",
                        "/Td6WFoAAATm1rRGAgAhARYAAAB0L+Wj6hvVPXVdB…",
                    ],
                },
            },
        },
        "unit-data": {
            "config": {
                "metrics": {
                    "scrape_jobs": [
                        {
                        "job_name":"zookeeper_0",
                        "path": "/metrics",
                        "port": 9100,
                    },
                        {
                        "job_name": "zookeeper_1",
                        "path":"/metrics",
                        "port": 9998
                    },
                        {
                        "job_name": "zookeeper_2",
                        "path": "/metrics",
                        "port": 7000
                    },
                    ]
                },
                "logs": {
                    "targets": ["my-app:slot"],
                }
            }
        }
    }
    ],
    "required": [],
    "properties": {
        "application-data": {
            "$id": "#/properties/application-data",
            "title": "Application Databag",
            "type": "object",
            "additionalProperties": true,
            "properties": {
                "config": {
                    "$id": "#/properties/application-data/config",
                    "title": "config exposed by the provider",
                    "type": "object",
                    "additionalProperties": true,
                    "properties": {
                        "metrics": {
                            "$id": "#/properties/application-data/config/metrics",
                            "type": "object",
                            "additionalProperties": true,
                            "properties": {
                                "alert_rules": {
                                    "$id": "#/properties/application-data/config/metrics/alert_rules",
                                    "title": "Alert rules exposed by the provider",
                                    "type": "object",
                                    "additionalProperties": true,
                                    "properties": {
                                        "groups": {
                                            "$id": "#/properties/application-data/config/metrics/alert_rules/groups",
                                            "title": "Alert rule groups exposed by the provider",
                                            "type": "array",
                                            "additionalItems": true,
                                            "items": [
                                                {
                                                "$id": "#/properties/application-data/config/metrics/alert_rules/groups/0",
                                                "title": "Alert rule group exposed by the provider",
                                                "type": "object",
                                                "additionalProperties": true,
                                                "properties": {
                                                    "name": {
                                                        "$id": "#/properties/application-data/config/metrics/alert_rules/groups/0/name",
                                                        "title": "Name of an alert rule group",
                                                        "type": "string"
                                                    },
                                                    "rules": {
                                                        "$id": "#/properties/application-data/config/metrics/alert_rules/groups/0/rules",
                                                        "title": "List of rules in an alert rule group",
                                                        "type": "array",
                                                        "additionalItems": true,
                                                        "items": [
                                                            {
                                                            "alert": {
                                                                "$id": "#/properties/application-data/config/metrics/alert_rules/groups/0/rules/0/alert",
                                                                "title": "Name of an individual alert rule",
                                                                "type": "string"
                                                            },
                                                            "expr": {
                                                                "$id": "#/properties/application-data/config/metrics/alert_rules/groups/0/rules/0/expr",
                                                                "title": "PromQL or LogQL expression of an individual alert rule",
                                                                "type": "string"
                                                            },
                                                            "for": {
                                                                "$id": "#/properties/application-data/config/metrics/alert_rules/groups/0/rules/0/for",
                                                                "title": "The duration for which an alert must triggered before it fires",
                                                                "type": "string"
                                                            },
                                                            "labels": {
                                                                "$id": "#/properties/application-data/config/metrics/alert_rules/groups/0/rules/0/labels",
                                                                "title": "Labels of an individual alert rule",
                                                                "type": "object",
                                                                "additionalProperties": {
                                                                    "type": "string"
                                                                }
                                                            },
                                                            "annotations": {
                                                                "$id": "#/properties/application-data/config/metrics/alert_rules/groups/0/rules/0/annotations",
                                                                "title": "Annotations of an individual alert rule",
                                                                "type": "object",
                                                                "additionalProperties": {
                                                                    "type": "string"
                                                                }
                                                            }
                                                        }
                                                        ]
                                                    }
                                                }
                                            }
                                            ]
                                        }
                                    }
                                },
                            }
                        },
                        "logs": {
                            "$id": "#/properties/application-data/config/logs",
                            "title": "Logs",
                            "type": "object",
                            "additionalProperties": true,
                            "properties": {
                                "alert_rules": {
                                    "$id": "#/properties/application-data/config/logs/alert_rules",
                                    "title": "Alert rule groups exposed by the provider",
                                    "type": "object",
                                    "additionalProperties": false,
                                },
                            },
                        },
                        "dashboards": {
                            "$id": "#/properties/application-data/dashboards",
                            "title": "Grafana Dashboards exposed by the provider",
                            "type": "array",
                            "additionalItems": true,
                            "items": [
                                {
                                "$id": "#/properties/application-data/dashboards/0",
                                "title": "Compressed and base64 encoded Grafana Dashboard",
                                "type": "string",
                            }
                            ],
                        }
                    },
                },
            },
        }
        "unit-data": {
            "$id": "#/properties/unit-data",
            "title": "Unit Databag",
            "type": "object",
            "additionalProperties": true,
            "properties": {
                "config": {
                    "$id": "#/properties/unit-data/config",
                    "title": "config exposed by the unit provider",
                    "type": "object",
                    "additionalProperties": true,
                    "properties": {
                        "metrics": {
                            "$id": "#/properties/unit-data/config/metrics",
                            "type": "object",
                            "additionalProperties": true,
                            "properties": {
                                "scrape_jobs":{
                                    "$id": "#/properties/unit-data/config/metrics/scrape_jobs",
                                    "type": "array",
                                    "additionalItems": true,
                                    "items": [
                                        {
                                        "job_name": {
                                            "$id": "#/properties/unit-data/config/metrics/scrape_jobs/0/job_name",
                                            "title": "Name of the job",
                                            "type": "string"
                                        },
                                        "path": {
                                            "$id": "#/properties/unit-data/config/metrics/scrape_jobs/0/path",
                                            "title": "Path of the metrics endpoint",
                                            "type": "string"
                                        },
                                        "port": {
                                            "$id": "#/properties/unit-data/config/metrics/scrape_jobs/0/port",
                                            "title": "Port of the metrics endpoint",
                                            "type": "integer"
                                        },
                                    },
                                    ],
                                }
                            }
                        },
                        "logs":{
                            "$id": "#/properties/unit-data/config/logs",
                            "type": "object",
                            "additionalProperties": true,
                            "properties": {
                                "targets":{
                                    "$id": "#/properties/unit-data/config/logs/targets",
                                    "type": "array",
                                    "additionalItems": true,
                                    "items": [
                                        {
                                        "$id": "#/properties/unit-data/config/logs/targets/0",
                                        "type": "string",
                                    },
                                    ],
                                },
                            },
                        },
                    },
                },
            }
        },
    },
}
