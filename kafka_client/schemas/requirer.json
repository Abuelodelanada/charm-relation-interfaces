{
   "$schema":"https://json-schema.org/draft/2019-09/schema",
   "$id":"https://canonical.github.io/charm-relation-interfaces/kafka/schemas/requirer.json",
   "title":"`kafka` requirer schema",
   "description":"The `kafka` root schema comprises the entire requirer databag for this interface.",
   "type":"object",
   "default":{
      
   },
   "required":[
      "extra-user-roles"
   ],
   "if":{
       "properties": {"role": {"const": "producer"}}
   },
   "then":{
       "required": ["topic"]
   },
   "if":{
       "properties": {"role": {"const": "consumer"}}
   },
   "then":{
       "required": ["topic", "group"]
   },
   "additionalProperties":true,
   "properties":{
      "extra-user-roles":{
         "title":"Application client roles",
         "description":"A comma-seperated list of application roles requested by the requirer",
         "type":"array",
         "default":"",
         "items":{
            "title":"Client role",
            "description":"A single permission role for the client",
            "type":"string",
            "enum":[
               "consumer",
               "producer",
               "admin"
            ]
         },
         "examples":[
            "consumer",
            "producer",
            "consumer/producer",
            "admin"
         ]
      },
      "topic":{
         "title":"Kafka topic name",
         "description":"The topic name access requested by the requirer",
         "type":"string",
         "default":"",
         "examples":[
            "topic-1",
            "appname-*"
         ]
      },
      "group":{
         "title":"Kafka consumer group name",
         "description":"The consumer group name requested by the requirer",
         "type":"string",
         "default":"",
         "examples":[
            "group-1",
            "appname-*"
         ]
      }
   },
   "examples":[
      {
         "extra-user-roles": "consumer",
         "topic": "special-topic",
         "group": "group-A"
      }
   ]
}
